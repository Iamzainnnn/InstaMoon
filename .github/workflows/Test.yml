name: Test Telegram Bot

on:
  workflow_dispatch:

jobs:
  test-telegram:
    runs-on: ubuntu-latest

    steps:
      - name: Check Secrets
        run: |
          echo "Checking if secrets are available..."
          if [[ -z "${TELEGRAM_BOT_TOKEN}" || -z "${TELEGRAM_CHAT_ID}" ]]; then
            echo "‚ùå ERROR: Secrets are missing! Please check TELEGRAM_BOT_TOKEN and TELEGRAM_CHAT_ID."
            exit 1
          fi
          echo "‚úÖ Secrets are set properly."

      - name: Send Test Message to Telegram
        run: |
          curl -X POST "https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage" \
          -H "Content-Type: application/x-www-form-urlencoded" \
          --data-urlencode "chat_id=${TELEGRAM_CHAT_ID}" \
          --data-urlencode "text=‚úÖ Test Message from GitHub Actions üöÄ" \
          --data-urlencode "parse_mode=Markdown"

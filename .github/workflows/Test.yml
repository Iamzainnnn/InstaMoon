name: Telegram Message Test

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - name: Check Secrets
        run: |
          echo "Checking if secrets are available..."
          if [[ -z "${{ secrets.TELEGRAM_BOT_TOKEN }}" || -z "${{ secrets.TELEGRAM_CHAT_ID }}" ]]; then
            echo "‚ùå ERROR: Secrets are missing! Please check TELEGRAM_BOT_TOKEN and TELEGRAM_CHAT_ID."
            exit 1
          fi
          echo "‚úÖ Secrets are set properly."

      - name: Send Test Message to Telegram
        run: |
          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
          -H "Content-Type: application/x-www-form-urlencoded" \
          --data-urlencode "chat_id=${{ secrets.TELEGRAM_CHAT_ID }}" \
          --data-urlencode "text=‚úÖ *GitHub Actions Test Successful!* üöÄ" \
          --data-urlencode "parse_mode=Markdown"
